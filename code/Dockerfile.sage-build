FROM sagemath/sagemath:latest
USER root
# Install build tools and Python headers + NumPy so Cython builds find numpy/arrayobject.h
RUN apt-get update && apt-get install -y \
	build-essential \
	python3-dev \
	python3-numpy \
	python3-distutils \
	pkg-config \
	&& rm -rf /var/lib/apt/lists/*
# Ensure Sage's Python environment has NumPy and build tools available
RUN sage -python -m pip install --upgrade pip setuptools wheel numpy
WORKDIR /workspace
